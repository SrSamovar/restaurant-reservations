# Система бронирования столиков в ресторане

REST API сервис для управления бронированием столиков в ресторане, разработанный с использованием FastAPI, SQLAlchemy и PostgreSQL.

## Функциональные возможности

- Управление столиками (создание, просмотр, удаление)
- Управление бронированиями (создание, просмотр, удаление)
- Проверка доступности столиков на определенное время
- Предотвращение конфликтов бронирования

## Технологический стек

- **FastAPI**: Современный высокопроизводительный веб-фреймворк для создания API
- **SQLAlchemy**: ORM для работы с базой данных
- **PostgreSQL**: Реляционная база данных
- **Alembic**: Инструмент для миграций базы данных
- **Docker & Docker Compose**: Контейнеризация приложения
- **Pydantic**: Валидация данных и сериализация

## API Endpoints

### Столики

- `GET /tables/` - Получить список всех столиков
- `POST /tables/` - Создать новый столик
- `DELETE /tables/{id}` - Удалить столик по ID

### Бронирования

- `GET /reservations/` - Получить список всех бронирований
- `POST /reservations/` - Создать новое бронирование
- `DELETE /reservations/{id}` - Удалить бронирование по ID

## Модели данных

### Table (Столик)

- `id`: int - Уникальный идентификатор
- `name`: str - Название столика (например, "Столик 1")
- `seats`: int - Количество мест
- `location`: str - Расположение (например, "зал у окна", "терраса")

### Reservation (Бронирование)

- `id`: int - Уникальный идентификатор
- `customer_name`: str - Имя клиента
- `table_id`: int - Внешний ключ на столик
- `reservation_time`: datetime - Время бронирования
- `duration_minutes`: int - Продолжительность бронирования в минутах

## Установка и запуск

### Предварительные требования

- Docker и Docker Compose

### Запуск проекта

1. Клонировать репозиторий:

```bash
git clone https://github.com/your-username/restaurant-booking.git
cd restaurant-booking
```

2. Создать файл `.env` на основе `.env.example`:

```bash
cp .env.example .env
```

3. Запустить приложение с помощью Docker Compose:

```bash
docker-compose up -d
```

4. API будет доступно по адресу: http://localhost:8000

5. Документация API доступна по адресу: http://localhost:8000/docs

### Остановка проекта

```bash
docker-compose down
```

## Тестирование

Для запуска тестов выполните:

```bash
docker-compose exec app pytest
```

## Логика бронирования

- Система не позволяет создавать бронирования, которые пересекаются по времени для одного столика
- Продолжительность бронирования может быть произвольной
- При попытке создать конфликтующее бронирование API возвращает ошибку с пояснением

## Разработка

### Миграции базы данных

Для создания новой миграции:

```bash
docker-compose exec app alembic revision --autogenerate -m "описание изменений"
```

Для применения миграций:

```bash
docker-compose exec app alembic upgrade head
```